<div class="notifications-page">
  <div class="notifications-header">
    <h1>Notifications</h1>
    <div class="header-actions">
      <span class="unread-count" *ngIf="unreadCount > 0">{{unreadCount}} unread</span>
      <button class="mark-all-btn" (click)="markAllAsRead()" *ngIf="unreadCount > 0">
        Mark all as read
      </button>
    </div>
  </div>

  <div class="notifications-container">
    <div class="notifications-list">
      @if (notifications.length === 0) {
        <div class="empty-state">
          <div class="empty-icon">üîî</div>
          <h3>No notifications</h3>
          <p>You're all caught up! New notifications will appear here.</p>
        </div>
      } @else {
        @for (notification of notifications; track notification.id) {
          <div class="notification-item" 
               [class.unread]="!notification.read"
               (click)="markAsRead(notification.id)">
            
            <div class="notification-avatar">
              @if (notification.avatar) {
                <div class="user-avatar">{{notification.avatar}}</div>
              } @else {
                <div class="notification-icon">{{getNotificationIcon(notification.type)}}</div>
              }
            </div>

            <div class="notification-content">
              <div class="notification-header">
                <h4 class="notification-title">{{notification.title}}</h4>
                <span class="notification-time">{{formatTimeAgo(notification.timestamp)}}</span>
              </div>
              
              <p class="notification-message">{{notification.message}}</p>
              
              @if (notification.userName) {
                <span class="notification-user">by {{notification.userName}}</span>
              }
            </div>

            <div class="notification-actions">
              @if (!notification.read) {
                <div class="unread-indicator"></div>
              }
              
              <button class="delete-btn" (click)="deleteNotification(notification.id, $event)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2"/>
                </svg>
              </button>
            </div>
          </div>
        }
      }
    </div>

    <!-- Notification Categories Filter -->
    <div class="notifications-sidebar">
      <div class="filter-section">
        <h3>Filter by type</h3>
        <div class="filter-options">
          <button class="filter-btn" 
                  [class.active]="selectedFilter === 'all'"
                  (click)="setFilter('all')">
            All ({{notifications.length}})
          </button>
          
          <button class="filter-btn"
                  [class.active]="selectedFilter === 'unread'"
                  (click)="setFilter('unread')">
            Unread ({{unreadCount}})
          </button>
          
          <button class="filter-btn"
                  [class.active]="selectedFilter === 'like'"
                  (click)="setFilter('like')">
            ‚ù§Ô∏è Likes ({{getCountByType('like')}})
          </button>
          
          <button class="filter-btn"
                  [class.active]="selectedFilter === 'comment'"
                  (click)="setFilter('comment')">
            üí¨ Comments ({{getCountByType('comment')}})
          </button>
          
          <button class="filter-btn"
                  [class.active]="selectedFilter === 'follow'"
                  (click)="setFilter('follow')">
            üë• Follows ({{getCountByType('follow')}})
          </button>
          
          <button class="filter-btn"
                  [class.active]="selectedFilter === 'mention'"
                  (click)="setFilter('mention')">
            @ Mentions ({{getCountByType('mention')}})
          </button>
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="stats-section">
        <h3>Quick Stats</h3>
        <div class="stats-grid">
          <div class="stat-item">
            <span class="stat-number">{{notifications.length}}</span>
            <span class="stat-label">Total</span>
          </div>
          
          <div class="stat-item">
            <span class="stat-number">{{unreadCount}}</span>
            <span class="stat-label">Unread</span>
          </div>
          
          <div class="stat-item">
            <span class="stat-number">{{getTodayCount()}}</span>
            <span class="stat-label">Today</span>
          </div>
          
          <div class="stat-item">
            <span class="stat-number">{{getThisWeekCount()}}</span>
            <span class="stat-label">This Week</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
